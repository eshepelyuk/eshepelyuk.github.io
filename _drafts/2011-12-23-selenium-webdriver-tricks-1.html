---
layout: post
title: Selenium/WebDriver tricks - part 1
date: '2011-12-23T00:38:00.000+02:00'
author: Evgeny Shepelyuk
tags:
- java
- webdriver
- xpath
- how-to
- selenium
modified_time: '2011-12-23T01:01:51.133+02:00'
blogger_id: tag:blogger.com,1999:blog-4998424779235998349.post-252068109022172295
blogger_orig_url: http://eshepelyuk.blogspot.com/2011/12/selenium-webdriver-tricks-1.html
---

Finally decided to start series (i hope) of blog posts describing tricks that could help developers to write more robust Selenium<i> </i>/ WebDriver<i> </i>tests. Here are two of them.<br />This information is all covered by Selenium<i> </i>JavaDocs. But if you're good programmer - will you ever read JavaDocs ? :)<br /><br /><b>Q:</b> How to find element by XPath<i> </i>expression&nbsp; under certain node of HTML<i> </i>tree and not from HTML tree root ?<br /><b>A:</b> You should prefix your XPath<i> </i>expression with <span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;"><b>.//&nbsp;</b></span> (dot in the beginning)<br /><br />Having HTML <br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;">&lt;html&gt;<br />&nbsp; &nbsp;&lt;body&gt;<br />&nbsp; &nbsp; &lt;div id="panel1"&gt;<br />&nbsp;   &nbsp; &nbsp; &nbsp;&lt;div&gt;<br />&nbsp;       &nbsp; &nbsp; &nbsp; &nbsp; &lt;span class="myClass"&gt;ITEM1&lt;/span&gt;<br />&nbsp;   &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br />&nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &nbsp; &lt;div id="panel2"&gt;<br />&nbsp;   &nbsp; &nbsp; &nbsp;&lt;div&gt;<br />&nbsp;       &nbsp; &nbsp; &nbsp; &nbsp;&lt;span class="myClass"&gt;ITEM2&lt;/span&gt;<br />&nbsp;   &nbsp; &nbsp; &nbsp;&lt;/div&gt;<br />&nbsp; &nbsp; &lt;/div&gt;<br />&nbsp; &lt;/body&gt;<br />&lt;/html&gt;</span></span> <br />&nbsp;Java test below illustrates the difference<br /><br /><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;"><span style="font-size: x-small;">WebElement panel2 = webDriver.findElement(By.id("panel2"));</span></span><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;"><span style="font-size: x-small;"><br /></span></span><br /><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;"><span style="font-size: x-small;">WebElement el1 = panel2.findElement(By.xpath("//span[@class = 'myClass']"));</span></span><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;"><span style="font-size: x-small;"><br /></span></span><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;"><span style="font-size: x-small;">        WebElement el2 = panel2.findElement(By.xpath(".//span[@class = 'myClass']"));</span></span><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;"><span style="font-size: x-small;"><br /></span></span><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;"><span style="font-size: x-small;"><br /></span></span><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;"><span style="font-size: x-small;">        assert el1.getText().equals("ITEM1");</span></span><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;"><span style="font-size: x-small;"><br /></span></span><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;"><span style="font-size: x-small;">        assert el2.getText().equals("ITEM2");</span></span><br /><i><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;"><br /></span></i><br /><span style="font-family: inherit;">XPath</span><i><span style="font-family: inherit;"> </span></i><span style="font-family: inherit;">expression</span><span style="font-family: inherit;"> </span><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;"><span style="font-size: x-small;">//span[@class = 'myClass']</span></span><span style="font-family: inherit;"> makes WebDriver to look for element using HTML root as starting point even if we call </span><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;">findElement()</span></span><span style="font-family: inherit;"> not at </span><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;">webDriver</span></span><span style="font-family: inherit;"> variable. From other hand using </span><span style="font-size: small;"><span style="font-family: inherit;">XPath starting </span></span><span style="font-size: small;"><span style="font-family: inherit;">from dot, i.e. </span></span><span style="font-size: x-small;"><span style="font-family: inherit;">- </span></span><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;"><span style="font-size: x-small;">.//span[@class = 'myClass']</span></span><span style="font-family: inherit;"> </span><span style="font-size: small;"><span style="font-family: inherit;">instructs WebDriver </span><b><span style="font-family: inherit;">&nbsp;</span></b><span style="font-family: inherit;">to use </span></span><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;">panel2</span></span><span style="font-family: inherit;">&nbsp;</span><span style="font-family: inherit;">as starting point.</span><br /><i><span style="font-family: inherit;"><br /></span></i><br /><b>Q:&nbsp;</b>How to check that certain element doesn't exist in HTML<i> </i>tree.<br /><b>A:&nbsp;</b>There's common <i>anti-pattern</i> frequently used by developers.<br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;"><br /></span></span><br /><span style="font-size: x-small;"><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;">WebElement notExist = null;<br />        try {<br />&nbsp; &nbsp; notExist = webDriver.findElement(By.xpath("//div[@id='iAmNotHere']"));<br />        } catch (NoSuchElementException e) {<br />        }<br />        assert notExist == null;</span></span><br /><br />This approach has enough disadvantages and best practices violations. We ain't gonna cover them here ;)<br />Instead we can use much simpler code to achieve the same result.<br /><span style="font-family: &quot;Courier New&quot;, &quot;Courier&quot;, monospace;"><span style="font-size: x-small;">assert webDriver.findElements(By.xpath("//div[@id='iAmNotHere']")).size() == 0;</span></span><br /><i><span style="font-size: x-small;"><br /></span></i><b>P.S.:</b><i> </i>Let's start read JavaDocs<i> </i>before writing code :)<i><br /></i>